{"version":3,"file":"usePrefersColorScheme.cjs","sources":["../../src/studio/usePrefersColorScheme.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-empty-function */\nimport type {ThemeColorSchemeKey} from '@sanity/ui'\nimport {useSyncExternalStore} from 'react'\n\nfunction createStore() {\n  if (typeof document === 'undefined') {\n    return {\n      subscribe: () => () => {},\n      getSnapshot: () => 'light' as const,\n      getServerSnapshot: () => 'light' as const,\n    }\n  }\n\n  const matchMedia = window.matchMedia('(prefers-color-scheme: dark)')\n\n  return {\n    subscribe: (onStoreChange: () => void) => {\n      matchMedia.addEventListener('change', onStoreChange)\n      return () => matchMedia.removeEventListener('change', onStoreChange)\n    },\n    getSnapshot: () => (matchMedia.matches ? 'dark' : 'light'),\n    getServerSnapshot: () => 'light' as const,\n  }\n}\nconst store = createStore()\n\n/** @alpha */\nexport function usePrefersColorScheme(): ThemeColorSchemeKey {\n  return useSyncExternalStore(store.subscribe, store.getSnapshot, store.getServerSnapshot)\n}\n"],"names":["store","document","subscribe","getSnapshot","getServerSnapshot","matchMedia","window","onStoreChange","addEventListener","removeEventListener","matches","createStore","useSyncExternalStore"],"mappings":"2FAwBA,MAAMA,EApBN,WACM,GAAoB,oBAAbC,SACF,MAAA,CACLC,UAAWA,IAAM,OACjBC,YAAaA,IAAM,QACnBC,kBAAmBA,IAAM,SAIvB,MAAAC,EAAaC,OAAOD,WAAW,gCAE9B,MAAA,CACLH,UAAYK,IACCF,EAAAG,iBAAiB,SAAUD,GAC/B,IAAMF,EAAWI,oBAAoB,SAAUF,IAExDJ,YAAaA,IAAOE,EAAWK,QAAU,OAAS,QAClDN,kBAAmBA,IAAM,QAE7B,CACcO,iCAGP,WACL,OAAOC,EAAAA,qBAAqBZ,EAAME,UAAWF,EAAMG,YAAaH,EAAMI,kBACxE"}